class CopyButtonPlugin {
    constructor(options = {}) {
      this.hook = options.hook;
      this.callback = options.callback;
      this.lang = options.lang || document.documentElement.lang || "en";
    }
  
    "after:highlightElement"({ el, code }) {
      let button = Object.assign(document.createElement("button"), {
        innerHTML: locales[this.lang]?.[0] || "Copy",
        className: "hljs-copy-button"
      });
      button.dataset.copied = false;
      el.parentElement.classList.add("hljs-copy-wrapper");
      el.parentElement.appendChild(button);
      el.parentElement.style.setProperty("--hljs-theme-background", window.getComputedStyle(el).backgroundColor);
      button.onclick = function() {
        if (!navigator.clipboard) return;
        let newText = el.textContent;
        if (this.hook && typeof this.hook === "function") {
          newText = this.hook(el, code) || newText;
        }
        navigator.clipboard.writeText(newText).then(function() {
          button.innerHTML = locales[this.lang]?.[1] || "Copied!";
          button.dataset.copied = true;
          let alert = Object.assign(document.createElement("div"), {
            role: "status",
            className: "hljs-copy-alert",
            innerHTML: locales[this.lang]?.[2] || "Copied to clipboard"
          });
          el.parentElement.appendChild(alert);
          setTimeout(() => {
            button.innerHTML = locales[this.lang]?.[0] || "Copy";
            button.dataset.copied = false;
            el.parentElement.removeChild(alert);
            alert = null;
          }, 2e3);
        }).then(function() {
          if (typeof this.callback === "function") return this.callback(newText, el);
        });
      };
    }
  }
  
  if (typeof module != "undefined") {
    module.exports = CopyButtonPlugin;
  }
  
  const locales = {
    en: ["Copy", "Copied!", "Copied to clipboard"],
    es: ["Copiar", "¡Copiado!", "Copiado al portapapeles"],
    fr: ["Copier", "Copié !", "Copié dans le presse-papier"],
    de: ["Kopieren", "Kopiert!", "In die Zwischenablage kopiert"],
    ja: ["コピー", "コピーしました！", "クリップボードにコピーしました"],
    ko: ["복사", "복사됨!", "클립보드에 복사됨"],
    ru: ["Копировать", "Скопировано!", "Скопировано в буфер обмена"],
    zh: ["复制", "已复制!", "已复制到剪贴板"],
    "zh-tw": ["複製", "已複製!", "已複製到剪貼簿"]
  };